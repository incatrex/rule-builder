{
  "structure": "case",
  "returnType": "text",
  "ruleType": "Transformation",
  "uuId": "bbbbbbbb-2222-3333-4444-000000000002",
  "version": 1,
  "metadata": {
    "id": "CASE_EXPRESSION",
    "description": "Comprehensive case expression demonstrating all operators, functions, nested structures, and expression groups"
  },
  "content": {
    "whenClauses": [
      {
        "resultName": "High Value with Complex Math",
        "when": {
          "type": "conditionGroup",
          "returnType": "boolean",
          "name": "Complex Math and Text Conditions",
          "conjunction": "AND",
          "not": false,
          "conditions": [
            {
              "type": "condition",
              "id": "case-cond-1",
              "returnType": "boolean",
              "name": "Nested Function Greater Than",
              "left": {
                "source": "expressionGroup",
                "returnType": "number",
                "expressions": [
                  {
                    "source": "function",
                    "returnType": "number",
                    "function": {
                      "name": "MATH.ROUND",
                      "args": [
                        {
                          "name": "value",
                          "value": {
                            "source": "expressionGroup",
                            "returnType": "number",
                            "expressions": [
                              {
                                "source": "function",
                                "returnType": "number",
                                "function": {
                                  "name": "MATH.MULTIPLY",
                                  "args": [
                                    {
                                      "name": "arg1",
                                      "value": {
                                        "source": "expressionGroup",
                                        "returnType": "number",
                                        "expressions": [
                                          {
                                            "source": "field",
                                            "returnType": "number",
                                            "field": "TABLE1.NUMBER_FIELD_01"
                                          }
                                        ],
                                        "operators": []
                                      }
                                    },
                                    {
                                      "name": "arg2",
                                      "value": {
                                        "source": "expressionGroup",
                                        "returnType": "number",
                                        "expressions": [
                                          {
                                            "source": "value",
                                            "returnType": "number",
                                            "value": 1.15
                                          }
                                        ],
                                        "operators": []
                                      }
                                    }
                                  ]
                                }
                              }
                            ],
                            "operators": []
                          }
                        },
                        {
                          "name": "decimals",
                          "value": {
                            "source": "expressionGroup",
                            "returnType": "number",
                            "expressions": [
                              {
                                "source": "value",
                                "returnType": "number",
                                "value": 2
                              }
                            ],
                            "operators": []
                          }
                        }
                      ]
                    }
                  }
                ],
                "operators": []
              },
              "operator": "greater",
              "right": {
                "source": "expressionGroup",
                "returnType": "number",
                "expressions": [
                  {
                    "source": "value",
                    "returnType": "number",
                    "value": 1000
                  }
                ],
                "operators": []
              }
            },
            {
              "type": "condition",
              "id": "case-cond-2",
              "returnType": "boolean",
              "name": "Text Not Contains",
              "left": {
                "source": "expressionGroup",
                "returnType": "text",
                "expressions": [
                  {
                    "source": "field",
                    "returnType": "text",
                    "field": "TABLE1.TEXT_FIELD_01"
                  }
                ],
                "operators": []
              },
              "operator": "not_contains",
              "right": {
                "source": "expressionGroup",
                "returnType": "text",
                "expressions": [
                  {
                    "source": "value",
                    "returnType": "text",
                    "value": "EXCLUDE"
                  }
                ],
                "operators": []
              }
            }
          ]
        },
        "then": {
          "source": "expressionGroup",
          "returnType": "text",
          "expressions": [
            {
              "source": "function",
              "returnType": "text",
              "function": {
                "name": "TEXT.CONCAT",
                "args": [
                  {
                    "name": "arg1",
                    "value": {
                      "source": "expressionGroup",
                      "returnType": "text",
                      "expressions": [
                        {
                          "source": "value",
                          "returnType": "text",
                          "value": "HIGH_VALUE_"
                        }
                      ],
                      "operators": []
                    }
                  },
                  {
                    "name": "arg2",
                    "value": {
                      "source": "expressionGroup",
                      "returnType": "text",
                      "expressions": [
                        {
                          "source": "field",
                          "returnType": "text",
                          "field": "TABLE1.TEXT_FIELD_02"
                        }
                      ],
                      "operators": []
                    }
                  }
                ]
              }
            }
          ],
          "operators": []
        }
      },
      {
        "resultName": "Medium Range with Date Check",
        "when": {
          "type": "conditionGroup",
          "returnType": "boolean",
          "name": "Range and Date Validations",
          "conjunction": "OR",
          "not": false,
          "conditions": [
            {
              "type": "condition",
              "id": "case-cond-3",
              "returnType": "boolean",
              "name": "Value Between Range",
              "left": {
                "source": "expressionGroup",
                "returnType": "number",
                "expressions": [
                  {
                    "source": "function",
                    "returnType": "number",
                    "function": {
                      "name": "MATH.ADD",
                      "args": [
                        {
                          "name": "arg1",
                          "value": {
                            "source": "expressionGroup",
                            "returnType": "number",
                            "expressions": [
                              {
                                "source": "field",
                                "returnType": "number",
                                "field": "TABLE2.NUMBER_FIELD_01"
                              }
                            ],
                            "operators": []
                          }
                        },
                        {
                          "name": "arg2",
                          "value": {
                            "source": "expressionGroup",
                            "returnType": "number",
                            "expressions": [
                              {
                                "source": "field",
                                "returnType": "number",
                                "field": "TABLE2.NUMBER_FIELD_02"
                              }
                            ],
                            "operators": []
                          }
                        }
                      ]
                    }
                  }
                ],
                "operators": []
              },
              "operator": "between",
              "right": [
                {
                  "source": "expressionGroup",
                  "returnType": "number",
                  "expressions": [
                    {
                      "source": "value",
                      "returnType": "number",
                      "value": 100
                    }
                  ],
                  "operators": []
                },
                {
                  "source": "expressionGroup",
                  "returnType": "number",
                  "expressions": [
                    {
                      "source": "value",
                      "returnType": "number",
                      "value": 1000
                    }
                  ],
                  "operators": []
                }
              ]
            },
            {
              "type": "conditionGroup",
              "returnType": "boolean",
              "name": "Nested Date Conditions",
              "conjunction": "AND",
              "not": true,
              "conditions": [
                {
                  "type": "condition",
                  "id": "case-cond-4",
                  "returnType": "boolean",
                  "name": "Date Difference Check",
                  "left": {
                    "source": "expressionGroup",
                    "returnType": "number",
                    "expressions": [
                      {
                        "source": "function",
                        "returnType": "number",
                        "function": {
                          "name": "DATE.DIFF",
                          "args": [
                            {
                              "name": "date1",
                              "value": {
                                "source": "expressionGroup",
                                "returnType": "date",
                                "expressions": [
                                  {
                                    "source": "field",
                                    "returnType": "date",
                                    "field": "TABLE1.DATE_FIELD_01"
                                  }
                                ],
                                "operators": []
                              }
                            },
                            {
                              "name": "date2",
                              "value": {
                                "source": "expressionGroup",
                                "returnType": "date",
                                "expressions": [
                                  {
                                    "source": "value",
                                    "returnType": "date",
                                    "value": "2024-01-01"
                                  }
                                ],
                                "operators": []
                              }
                            },
                            {
                              "name": "unit",
                              "value": {
                                "source": "expressionGroup",
                                "returnType": "text",
                                "expressions": [
                                  {
                                    "source": "value",
                                    "returnType": "text",
                                    "value": "days"
                                  }
                                ],
                                "operators": []
                              }
                            }
                          ]
                        }
                      }
                    ],
                    "operators": []
                  },
                  "operator": "less_or_equal",
                  "right": {
                    "source": "expressionGroup",
                    "returnType": "number",
                    "expressions": [
                      {
                        "source": "value",
                        "returnType": "number",
                        "value": 30
                      }
                    ],
                    "operators": []
                  }
                }
              ]
            }
          ]
        },
        "then": {
          "source": "expressionGroup",
          "returnType": "text",
          "expressions": [
            {
              "source": "function",
              "returnType": "text",
              "function": {
                "name": "TEXT.MID",
                "args": [
                  {
                    "name": "text",
                    "value": {
                      "source": "expressionGroup",
                      "returnType": "text",
                      "expressions": [
                        {
                          "source": "field",
                          "returnType": "text",
                          "field": "TABLE2.TEXT_FIELD_01"
                        }
                      ],
                      "operators": []
                    }
                  },
                  {
                    "name": "start",
                    "value": {
                      "source": "expressionGroup",
                      "returnType": "number",
                      "expressions": [
                        {
                          "source": "value",
                          "returnType": "number",
                          "value": 0
                        }
                      ],
                      "operators": []
                    }
                  },
                  {
                    "name": "length",
                    "value": {
                      "source": "expressionGroup",
                      "returnType": "number",
                      "expressions": [
                        {
                          "source": "value",
                          "returnType": "number",
                          "value": 10
                        }
                      ],
                      "operators": []
                    }
                  }
                ]
              }
            }
          ],
          "operators": []
        }
      },
      {
        "resultName": "Text Pattern Match with Complex Expression",
        "when": {
          "type": "conditionGroup",
          "returnType": "boolean",
          "name": "Text Pattern Checks",
          "conjunction": "AND",
          "not": false,
          "conditions": [
            {
              "type": "condition",
              "id": "case-cond-5",
              "returnType": "boolean",
              "name": "Starts With Check",
              "left": {
                "source": "expressionGroup",
                "returnType": "text",
                "expressions": [
                  {
                    "source": "field",
                    "returnType": "text",
                    "field": "TABLE1.TEXT_FIELD_02"
                  }
                ],
                "operators": []
              },
              "operator": "starts_with",
              "right": {
                "source": "expressionGroup",
                "returnType": "text",
                "expressions": [
                  {
                    "source": "value",
                    "returnType": "text",
                    "value": "PREFIX"
                  }
                ],
                "operators": []
              }
            },
            {
              "type": "condition",
              "id": "case-cond-6",
              "returnType": "boolean",
              "name": "Ends With Check",
              "left": {
                "source": "expressionGroup",
                "returnType": "text",
                "expressions": [
                  {
                    "source": "field",
                    "returnType": "text",
                    "field": "TABLE2.TEXT_FIELD_02"
                  }
                ],
                "operators": []
              },
              "operator": "ends_with",
              "right": {
                "source": "expressionGroup",
                "returnType": "text",
                "expressions": [
                  {
                    "source": "value",
                    "returnType": "text",
                    "value": "SUFFIX"
                  }
                ],
                "operators": []
              }
            }
          ]
        },
        "then": {
          "source": "expressionGroup",
          "returnType": "text",
          "expressions": [
            {
              "source": "value",
              "returnType": "text",
              "value": "PATTERN_MATCH_"
            },
            {
              "source": "function",
              "returnType": "text",
              "function": {
                "name": "TEXT.LEN",
                "args": [
                  {
                    "name": "text",
                    "value": {
                      "source": "expressionGroup",
                      "returnType": "text",
                      "expressions": [
                        {
                          "source": "field",
                          "returnType": "text",
                          "field": "TABLE1.TEXT_FIELD_01"
                        }
                      ],
                      "operators": []
                    }
                  }
                ]
              }
            }
          ],
          "operators": ["+"]
        }
      },
      {
        "resultName": "Empty Field Validation",
        "when": {
          "type": "conditionGroup",
          "returnType": "boolean",
          "name": "Empty Field Checks",
          "conjunction": "OR",
          "not": false,
          "conditions": [
            {
              "type": "condition",
              "id": "case-cond-7",
              "returnType": "boolean",
              "name": "Is Empty Check",
              "left": {
                "source": "expressionGroup",
                "returnType": "text",
                "expressions": [
                  {
                    "source": "field",
                    "returnType": "text",
                    "field": "TABLE1.TEXT_FIELD_03"
                  }
                ],
                "operators": []
              },
              "operator": "is_empty",
              "right": null
            },
            {
              "type": "condition",
              "id": "case-cond-8",
              "returnType": "boolean",
              "name": "Not Empty Check",
              "left": {
                "source": "expressionGroup",
                "returnType": "text",
                "expressions": [
                  {
                    "source": "field",
                    "returnType": "text",
                    "field": "TABLE2.TEXT_FIELD_03"
                  }
                ],
                "operators": []
              },
              "operator": "is_not_empty",
              "right": null
            }
          ]
        },
        "then": {
          "source": "expressionGroup",
          "returnType": "text",
          "expressions": [
            {
              "source": "value",
              "returnType": "text",
              "value": "EMPTY_FIELD_DETECTED"
            }
          ],
          "operators": []
        }
      },
      {
        "resultName": "Complex Math with Nested Expression Groups",
        "when": {
          "type": "conditionGroup",
          "returnType": "boolean",
          "name": "Complex Math Validation",
          "conjunction": "AND",
          "not": false,
          "conditions": [
            {
              "type": "condition",
              "id": "case-cond-9",
              "returnType": "boolean",
              "name": "Not Equal Check",
              "left": {
                "source": "expressionGroup",
                "returnType": "number",
                "expressions": [
                  {
                    "source": "function",
                    "returnType": "number",
                    "function": {
                      "name": "MATH.ABS",
                      "args": [
                        {
                          "name": "value",
                          "value": {
                            "source": "expressionGroup",
                            "returnType": "number",
                            "expressions": [
                              {
                                "source": "function",
                                "returnType": "number",
                                "function": {
                                  "name": "MATH.SUBTRACT",
                                  "args": [
                                    {
                                      "name": "arg1",
                                      "value": {
                                        "source": "expressionGroup",
                                        "returnType": "number",
                                        "expressions": [
                                          {
                                            "source": "field",
                                            "returnType": "number",
                                            "field": "TABLE1.NUMBER_FIELD_02"
                                          }
                                        ],
                                        "operators": []
                                      }
                                    },
                                    {
                                      "name": "arg2",
                                      "value": {
                                        "source": "expressionGroup",
                                        "returnType": "number",
                                        "expressions": [
                                          {
                                            "source": "field",
                                            "returnType": "number",
                                            "field": "TABLE2.NUMBER_FIELD_02"
                                          }
                                        ],
                                        "operators": []
                                      }
                                    }
                                  ]
                                }
                              }
                            ],
                            "operators": []
                          }
                        }
                      ]
                    }
                  }
                ],
                "operators": []
              },
              "operator": "not_equal",
              "right": {
                "source": "expressionGroup",
                "returnType": "number",
                "expressions": [
                  {
                    "source": "value",
                    "returnType": "number",
                    "value": 0
                  }
                ],
                "operators": []
              }
            },
            {
              "type": "condition",
              "id": "case-cond-10",
              "returnType": "boolean",
              "name": "Not Between Check",
              "left": {
                "source": "expressionGroup",
                "returnType": "number",
                "expressions": [
                  {
                    "source": "function",
                    "returnType": "number",
                    "function": {
                      "name": "MATH.DIVIDE",
                      "args": [
                        {
                          "name": "arg1",
                          "value": {
                            "source": "expressionGroup",
                            "returnType": "number",
                            "expressions": [
                              {
                                "source": "field",
                                "returnType": "number",
                                "field": "TABLE1.NUMBER_FIELD_03"
                              }
                            ],
                            "operators": []
                          }
                        },
                        {
                          "name": "arg2",
                          "value": {
                            "source": "expressionGroup",
                            "returnType": "number",
                            "expressions": [
                              {
                                "source": "value",
                                "returnType": "number",
                                "value": 2
                              }
                            ],
                            "operators": []
                          }
                        }
                      ]
                    }
                  }
                ],
                "operators": []
              },
              "operator": "not_between",
              "right": [
                {
                  "source": "expressionGroup",
                  "returnType": "number",
                  "expressions": [
                    {
                      "source": "value",
                      "returnType": "number",
                      "value": 10
                    }
                  ],
                  "operators": []
                },
                {
                  "source": "expressionGroup",
                  "returnType": "number",
                  "expressions": [
                    {
                      "source": "value",
                      "returnType": "number",
                      "value": 20
                    }
                  ],
                  "operators": []
                }
              ]
            }
          ]
        },
        "then": {
          "source": "expressionGroup",
          "returnType": "text",
          "expressions": [
            {
              "source": "value",
              "returnType": "text",
              "value": "RESULT_"
            },
            {
              "source": "expressionGroup",
              "returnType": "text",
              "expressions": [
                {
                  "source": "function",
                  "returnType": "text",
                  "function": {
                    "name": "TEXT.CONCAT",
                    "args": [
                      {
                        "name": "arg1",
                        "value": {
                          "source": "expressionGroup",
                          "returnType": "text",
                          "expressions": [
                            {
                              "source": "value",
                              "returnType": "text",
                              "value": "COMPLEX_"
                            }
                          ],
                          "operators": []
                        }
                      },
                      {
                        "name": "arg2",
                        "value": {
                          "source": "expressionGroup",
                          "returnType": "text",
                          "expressions": [
                            {
                              "source": "value",
                              "returnType": "text",
                              "value": "MATH"
                            }
                          ],
                          "operators": []
                        }
                      }
                    ]
                  }
                }
              ],
              "operators": []
            }
          ],
          "operators": ["+"]
        }
      },
      {
        "resultName": "Array Sum with Less Than",
        "when": {
          "type": "conditionGroup",
          "returnType": "boolean",
          "name": "Array Sum Validation",
          "conjunction": "AND",
          "not": false,
          "conditions": [
            {
              "type": "condition",
              "id": "case-cond-11",
              "returnType": "boolean",
              "name": "Less Than Check",
              "left": {
                "source": "expressionGroup",
                "returnType": "number",
                "expressions": [
                  {
                    "source": "function",
                    "returnType": "number",
                    "function": {
                      "name": "MATH.SUM",
                      "args": [
                        {
                          "name": "values",
                          "value": {
                            "source": "expressionGroup",
                            "returnType": "number",
                            "expressions": [
                              {
                                "source": "field",
                                "returnType": "number",
                                "field": "TABLE1.NUMBER_FIELD_01"
                              },
                              {
                                "source": "field",
                                "returnType": "number",
                                "field": "TABLE1.NUMBER_FIELD_02"
                              },
                              {
                                "source": "value",
                                "returnType": "number",
                                "value": 50
                              }
                            ],
                            "operators": ["+", "+"]
                          }
                        }
                      ]
                    }
                  }
                ],
                "operators": []
              },
              "operator": "less",
              "right": {
                "source": "expressionGroup",
                "returnType": "number",
                "expressions": [
                  {
                    "source": "value",
                    "returnType": "number",
                    "value": 500
                  }
                ],
                "operators": []
              }
            },
            {
              "type": "condition",
              "id": "case-cond-12",
              "returnType": "boolean",
              "name": "Greater or Equal Check",
              "left": {
                "source": "expressionGroup",
                "returnType": "number",
                "expressions": [
                  {
                    "source": "field",
                    "returnType": "number",
                    "field": "TABLE2.NUMBER_FIELD_03"
                  }
                ],
                "operators": []
              },
              "operator": "greater_or_equal",
              "right": {
                "source": "expressionGroup",
                "returnType": "number",
                "expressions": [
                  {
                    "source": "value",
                    "returnType": "number",
                    "value": 0
                  }
                ],
                "operators": []
              }
            }
          ]
        },
        "then": {
          "source": "expressionGroup",
          "returnType": "text",
          "expressions": [
            {
              "source": "value",
              "returnType": "text",
              "value": "SUM_RESULT"
            }
          ],
          "operators": []
        }
      }
    ],
    "elseClause": {
      "source": "expressionGroup",
      "returnType": "text",
      "expressions": [
        {
          "source": "function",
          "returnType": "text",
          "function": {
            "name": "TEXT.CONCAT",
            "args": [
              {
                "name": "arg1",
                "value": {
                  "source": "expressionGroup",
                  "returnType": "text",
                  "expressions": [
                    {
                      "source": "value",
                      "returnType": "text",
                      "value": "DEFAULT_"
                    }
                  ],
                  "operators": []
                }
              },
              {
                "name": "arg2",
                "value": {
                  "source": "expressionGroup",
                  "returnType": "text",
                  "expressions": [
                    {
                      "source": "function",
                      "returnType": "text",
                      "function": {
                        "name": "TEXT.CONCAT",
                        "args": [
                          {
                            "name": "arg1",
                            "value": {
                              "source": "expressionGroup",
                              "returnType": "text",
                              "expressions": [
                                {
                                  "source": "value",
                                  "returnType": "text",
                                  "value": "NO_"
                                }
                              ],
                              "operators": []
                            }
                          },
                          {
                            "name": "arg2",
                            "value": {
                              "source": "expressionGroup",
                              "returnType": "text",
                              "expressions": [
                                {
                                  "source": "value",
                                  "returnType": "text",
                                  "value": "MATCH"
                                }
                              ],
                              "operators": []
                            }
                          }
                        ]
                      }
                    }
                  ],
                  "operators": []
                }
              }
            ]
          }
        }
      ],
      "operators": []
    },
    "elseResultName": "Default No Match Case"
  }
}
